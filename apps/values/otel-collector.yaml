mode: deployment
replicaCount: 2
serviceAccount:
  create: true
config:
  receivers:
    otlp:
      protocols:
        grpc:
        http:
  processors:
    memory_limiter:
      limit_mib: 400
      spike_limit_mib: 200
      check_interval: 1s
    batch:
      timeout: 5s
      send_batch_max_size: 512
      send_batch_size: 256
  exporters:
    otlp/tempo:
      endpoint: tempo-distributor.monitoring.svc.cluster.local:4317
      tls:
        insecure: true
    loki:
      endpoint: http://loki.monitoring.svc.cluster.local:3100/loki/api/v1/push
      labels:
        resource:
          service.name: service
  service:
    pipelines:
      traces:
        receivers: [otlp]
        processors: [memory_limiter, batch]
        exporters: [otlp/tempo]
      logs:
        receivers: [otlp]
        processors: [batch]
        exporters: [loki]
serviceMonitor:
  enabled: true
resources:
  requests:
    cpu: 200m
    memory: 256Mi
  limits:
    cpu: 1
    memory: 512Mi
